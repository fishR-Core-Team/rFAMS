<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Simulate a population using the dynamic pool model • rFAMS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="dpmBH_files/libs/quarto-html/popper.min.js"></script><script src="dpmBH_files/libs/quarto-html/tippy.umd.min.js"></script><link href="dpmBH_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dpmBH_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate a population using the dynamic pool model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rFAMS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-demonstrations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Demonstrations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-demonstrations">
<li><a class="dropdown-item" href="../articles/MakeLH.html">Create life history object</a></li>
    <li><a class="dropdown-item" href="../articles/YPR_fixedMLL.html">Estimate yield based on a single minimum length limit</a></li>
    <li><a class="dropdown-item" href="../articles/YPR_VarMLL.html">Estimate yield based on multiple minimum length limit</a></li>
    <li><a class="dropdown-item" href="../articles/YPR_slotLimit.html">Estimate yield based on a slot length limit</a></li>
    <li><a class="dropdown-item" href="../articles/dpmBH.html">Simulate a population using the dynamic pool model</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-explanations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Explanations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-explanations">
<li><a class="dropdown-item" href="../articles/YPR_FAMSvRICKER.html">Comparing FAMS and Ricker YPR Equations</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../news/index.html" aria-label="See package news"><span class="fa fa-newspaper"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Goto rFAMS home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fishR-Core-Team/rFAMS" aria-label="Goto rFAMS github page"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate a population using the dynamic pool model</h1>

      <p class="author">Jason Doll</p>
      <p class="date">2026-02-07</p>

      <small class="dont-index">Source: <a href="https://github.com/fishR-Core-Team/rFAMS/blob/HEAD/vignettes/articles/dpmBH.qmd" class="external-link"><code>vignettes/articles/dpmBH.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fishR-Core-Team/rFAMS/" class="external-link">rFAMS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>  <span class="co">## to make figures</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>    <span class="co">## for filter</span></span></code></pre></div>
</div>
<p>The objective of this article is to demonstrate how to use rFAMS to simulate a population and estimate population characteristics using the dynamic pool model. The dynamic pool model projects a population forward based on recruitment, life history parameters, and mortality. The <code><a href="../reference/dpmBH_minLL_fixed.html">dpmBH_minLL_fixed()</a></code> function requires the following arguments:</p>
<ul>
<li>simyears: A single numeric for the lower limit of minimum length limit for harvest in mm.</li>
<li>minLL:A single numeric representing the minimum length limit for harvest in mm.</li>
<li>cf: A matrix of conditional fishing mortality where each row represents a year and each column represents age. Ages are age-0 through maximum age.</li>
<li>cm: A matrix of conditional natural mortality where each row represents a year and each column represents age. Ages are age-0 through maximum age.</li>
<li>rec: A numeric vector of length <code>simyears</code> to specify recruitment each year. The vector can be geneated using the <code><a href="../reference/genRecruits.html">genRecruits()</a></code> function.</li>
<li>lhparms: A named vector or list that contains values for each N0, tmax, Linf, K, t0, LWalpha, and LWbeta. See makeLH for definitions of these life history parameters. Also see details.</li>
<li>matchRicker: A logical that indicates whether the yield function should match that in Ricker (). Defaults to TRUE. The only reason to changed to FALSE is to try to match output from FAMS. See the <a href="YPR_FAMSvRICKER.html">YPR_FAMSvRICKER article</a>.</li>
<li>species: is a single character to specify the species used in the simulation and will define the length for stock, quality, preferred, memorable, and trophy. Length categories are obtained from the FSA package, see the PSDlit documentation.</li>
<li>group: is a single character to specify the sub-group name of a species used in the simulation and will define the length for stock, quality, preferred, memorable, and trophy. Length categories are obtained from the FSA package, see the PSDlit documentation.</li>
</ul>
<section class="section level2"><h2 id="organize-input-parameters">Organize input parameters<a class="anchor" aria-label="anchor" href="#organize-input-parameters"></a>
</h2>
<p><code>simyears</code> and <code>minLL</code> require a single numeric value. This example simulates a population for 50 years with a minimum length limit of 400mm.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simyears</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">minLL</span> <span class="op">&lt;-</span> <span class="fl">400</span></span></code></pre></div>
</div>
<p>The <code>lhparms</code> requires a list or vector that is created with the <code><a href="../reference/makeLH.html">makeLH()</a></code> function. The <code><a href="../reference/makeLH.html">makeLH()</a></code> function creates a list of the life history parameters needed. Including, the initial number of recruits, maximum age of fish in your population, von Bertalanffy growth model parameters (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>L</mi><mi>∞</mi></msub><annotation encoding="application/x-tex">L_\infty</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math>, and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mn>0</mn></msub><annotation encoding="application/x-tex">t_0</annotation></semantics></math>), and parameters from the log10-transformed weight length model (alpha and beta). By default, the <code><a href="../reference/makeLH.html">makeLH()</a></code> returns a list. Growth length-weight model paramaters can be generated from functions in the <a href="https://fishr-core-team.github.io/FSA/index.html" class="external-link">FSA package</a>. See the <a href="MakeLH.html">Make Life History object article</a> for more details. The example below uses the following life history parameters:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create life history parameter object</span></span>
<span><span class="va">LH</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/makeLH.html">makeLH</a></span><span class="op">(</span>N0<span class="op">=</span><span class="fl">100</span>,tmax<span class="op">=</span><span class="fl">15</span>,Linf<span class="op">=</span><span class="fl">1349.5</span>,K<span class="op">=</span><span class="fl">0.111</span>,t0<span class="op">=</span><span class="fl">0.065</span>,LWalpha<span class="op">=</span><span class="op">-</span><span class="fl">5.2147</span>,LWbeta<span class="op">=</span><span class="fl">3.153</span><span class="op">)</span></span></code></pre></div>
</div>
<p><code>cf</code> and <code>cm</code> are a matrix with rows = <code>simyears</code> (number of years specified in the simulation) and columns = <code>tmax</code> (maximum age). This example assigns a <code>cm</code> of 0 to the first year and 0.18 to the remaining years and is constant across ages; and a <code>cf</code> of 0 for the first year and 0.33 to the remaining years and is constant across ages. Note, Ages must be age-0 through maximum age. Thus, a <code>cf</code> and <code>cm</code> matrix will have maximum age plus on one rows.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.18</span>,<span class="op">(</span><span class="va">LH</span><span class="op">$</span><span class="va">tmax</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">simyears</span><span class="op">)</span>,nrow<span class="op">=</span><span class="va">simyears</span>,byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">cf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.33</span>,<span class="op">(</span><span class="va">LH</span><span class="op">$</span><span class="va">tmax</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">simyears</span><span class="op">)</span>,nrow<span class="op">=</span><span class="va">simyears</span>,byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<p>Recruitment must be a vector of length <code>simyears</code> and contain a single value for each year. Users can specify the vector manually or use the <code><a href="../reference/genRecruits.html">genRecruits()</a></code> function which allows the user to specify different trends in recruitment. This example sets recruitment to a fixed 1000 individuals each year.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/genRecruits.html">genRecruits</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"fixed"</span>, nR <span class="op">=</span> <span class="fl">1000</span>, simyears <span class="op">=</span> <span class="va">simyears</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="run-the-dynamic-pool-model">Run the dynamic pool model<a class="anchor" aria-label="anchor" href="#run-the-dynamic-pool-model"></a>
</h2>
<p>The <code>dpmBH_minLL_fixed</code> function will use all the arguments above to simulate the population and generate a list with two data.frame object. The first list item contains a data.frame with a summary by age and the second list item contains a data.frame with a summary by year. The example used here specifies “Striped Bass” that are in the group “landlocked”. The species and group are used to assign appropriate PSD categories see <a href="https://fishr-core-team.github.io/FSA/index.html" class="external-link">FSA package</a> for more information about PSD categories.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#run dynamic pool simulations</span></span>
<span><span class="va">out1</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/dpmBH_minLL_fixed.html">dpmBH_minLL_fixed</a></span><span class="op">(</span>simyears <span class="op">=</span> <span class="va">simyears</span>, minLL <span class="op">=</span> <span class="va">minLL</span>, cf <span class="op">=</span> <span class="va">cf</span>, cm <span class="op">=</span> <span class="va">cm</span>, rec <span class="op">=</span> <span class="va">rec</span>, lhparms <span class="op">=</span> <span class="va">LH</span>,</span>
<span>           matchRicker<span class="op">=</span><span class="cn">FALSE</span>,species<span class="op">=</span><span class="st">"Striped Bass"</span>,group<span class="op">=</span><span class="st">"landlocked"</span><span class="op">)</span></span></code></pre></div>
</div>
<p>View the first few lines of each summary</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out1</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>  <span class="co">#Summary by age</span></span>
<span><span class="co">#&gt;   year yc age   length     weight    nstart exploitation expect_nat_death   cf</span></span>
<span><span class="co">#&gt; 1    1  1   0   0.0000    0.00000 1000.0000    0.0000000        0.0000000 0.00</span></span>
<span><span class="co">#&gt; 2    2  1   1 133.0349   30.35037 1000.0000    0.0000000        0.1800000 0.33</span></span>
<span><span class="co">#&gt; 3    3  1   2 260.8383  253.58225  820.0000    0.0000000        0.1800000 0.33</span></span>
<span><span class="co">#&gt; 4    4  1   3 375.2145  798.00101  672.4000    0.3012967        0.1493033 0.33</span></span>
<span><span class="co">#&gt; 5    5  1   4 477.5741 1707.32249  405.4091    0.3012967        0.1493033 0.33</span></span>
<span><span class="co">#&gt; 6    6  1   5 569.1797 2968.94019  222.7318    0.3012967        0.1493033 0.33</span></span>
<span><span class="co">#&gt;     cm         F         M         Z      S   biomass  nharvest      ndie</span></span>
<span><span class="co">#&gt; 1 0.00 0.0000000 0.0000000 0.0000000 1.0000      0.00   0.00000   0.00000</span></span>
<span><span class="co">#&gt; 2 0.18 0.0000000 0.1984509 0.1984509 0.8200  30350.37   0.00000 180.00000</span></span>
<span><span class="co">#&gt; 3 0.18 0.0000000 0.1984509 0.1984509 0.8200 207937.44   0.00000 147.60000</span></span>
<span><span class="co">#&gt; 4 0.18 0.4004776 0.1984509 0.5989285 0.5494 536575.88 158.28150 108.70941</span></span>
<span><span class="co">#&gt; 5 0.18 0.4004776 0.1984509 0.5989285 0.5494 692164.07 122.14843  60.52891</span></span>
<span><span class="co">#&gt; 6 0.18 0.4004776 0.1984509 0.5989285 0.5494 661277.27  67.10835  33.25458</span></span>
<span><span class="co">#&gt;      yield minLL   N0   Linf     K    t0 LWalpha LWbeta tmax notes</span></span>
<span><span class="co">#&gt; 1      0.0   400 1000 1349.5 0.111 0.065 -5.2147  3.153   15      </span></span>
<span><span class="co">#&gt; 2      0.0   400 1000 1349.5 0.111 0.065 -5.2147  3.153   15      </span></span>
<span><span class="co">#&gt; 3      0.0   400 1000 1349.5 0.111 0.065 -5.2147  3.153   15      </span></span>
<span><span class="co">#&gt; 4 205139.2   400 1000 1349.5 0.111 0.065 -5.2147  3.153   15      </span></span>
<span><span class="co">#&gt; 5 274569.3   400 1000 1349.5 0.111 0.065 -5.2147  3.153   15      </span></span>
<span><span class="co">#&gt; 6 245109.6   400 1000 1349.5 0.111 0.065 -5.2147  3.153   15</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>  <span class="co">#Summary by year</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 16</span></span>
<span><span class="co">#&gt;    year age_1plus Yield_age_1plus Total_biomass nharvest_age_1plus</span></span>
<span><span class="co">#&gt;   &lt;int&gt;     &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     2     1000               0         30350.                 0 </span></span>
<span><span class="co">#&gt; 2     3     1820               0        238288.                 0 </span></span>
<span><span class="co">#&gt; 3     4     2492.         205139.       774864.               158.</span></span>
<span><span class="co">#&gt; 4     5     2898.         479709.      1467028.               280.</span></span>
<span><span class="co">#&gt; 5     6     3121.         724818.      2128305.               348.</span></span>
<span><span class="co">#&gt; 6     7     3243.         921629.      2683609.               384.</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: ndie_age_1plus &lt;dbl&gt;, memorable &lt;int&gt;, preferred &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   quality &lt;int&gt;, stock &lt;int&gt;, substock &lt;int&gt;, trophy &lt;dbl&gt;, PSD &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   PSD_P &lt;dbl&gt;, PSD_M &lt;dbl&gt;, PSD_T &lt;dbl&gt;</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="plot-results">Plot Results<a class="anchor" aria-label="anchor" href="#plot-results"></a>
</h2>
<p>The output contains a lot of information and there are several potential figures that can be constructed. Below are examples of a few figures that might be of interest. The first set of figures will explore the data summarized by age and the second set of figures will explore the data summarized by year. First, a custom theme is created to use across all plots.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Custom theme for plots (to make look nice)</span></span>
<span><span class="va">theme_FAMS</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>   panel.grid.major<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,panel.grid.minor<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>   axis.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">14</span>,color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span>,</span>
<span>   axis.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">16</span>,color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span>,</span>
<span>   axis.title.y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle<span class="op">=</span><span class="fl">90</span><span class="op">)</span>,</span>
<span>   axis.line<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span>,</span>
<span>   panel.border<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span> <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<section class="level2"><h3 id="exploring-the-summary-by-age-output">Exploring the summary by age output<a class="anchor" aria-label="anchor" href="#exploring-the-summary-by-age-output"></a>
</h3>
<p>The three figures below plot 1) yield vs age of a single year class 2) harvest vs age and 3) biomass vs age. Note since recruitment, cf, and cm was fixed across all year classes, all year classes will have the same age vs total yield.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Plot date using summary by age for a specific year class</span></span>
<span><span class="co">#filter for year class = 40</span></span>
<span><span class="va">plotdat</span><span class="op">&lt;-</span> <span class="va">out1</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yc</span><span class="op">==</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Plot yield vs age</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plotdat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">age</span>,y<span class="op">=</span><span class="va">yield</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Total yield (g)"</span>,x<span class="op">=</span><span class="st">"Age"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="dpmBH_files/figure-html/summary%20by%20age-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Plot Number harvested vs age</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plotdat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">age</span>,y<span class="op">=</span><span class="va">nharvest</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Number harvested"</span>,x<span class="op">=</span><span class="st">"Age"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="dpmBH_files/figure-html/summary%20by%20age-2.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Plot Number biomass vs age</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plotdat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">age</span>,y<span class="op">=</span><span class="va">biomass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Biomass (g)"</span>,x<span class="op">=</span><span class="st">"Age"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="dpmBH_files/figure-html/summary%20by%20age-3.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
</section><section class="level2"><h3 id="exploring-the-summary-by-year-output">Exploring the summary by year output<a class="anchor" aria-label="anchor" href="#exploring-the-summary-by-year-output"></a>
</h3>
<p>The next set of figures will explore the output summary by year. The first figure is PSD vs year and the second figure is Yield of age 1 plus vs year. Note each figure reaches an asymtote once all age classes are present in the population. This is because recruitment, cm, and cf are held constant across years.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Use summary by year data frame to plot PSD vs year</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">out1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>,y<span class="op">=</span><span class="va">PSD</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"PSD"</span>,x<span class="op">=</span><span class="st">"Year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="dpmBH_files/figure-html/summary%20by%20year-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Use summary by year data frame to plot yield vs year</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">out1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>,y<span class="op">=</span><span class="va">Yield_age_1plus</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Total yield (g)"</span>,x<span class="op">=</span><span class="st">"Year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="dpmBH_files/figure-html/summary%20by%20year-2.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
</section></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason C. Doll, Derek H. Ogle.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
