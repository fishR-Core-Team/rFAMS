<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Estimate yield based on multiple minimum length limits • rFAMS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="YPR_VarMLL_files/libs/quarto-html/popper.min.js"></script><script src="YPR_VarMLL_files/libs/quarto-html/tippy.umd.min.js"></script><link href="YPR_VarMLL_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="YPR_VarMLL_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate yield based on multiple minimum length limits">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rFAMS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-demonstrations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Demonstrations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-demonstrations">
<li><a class="dropdown-item" href="../articles/YPR_fixedMLL.html">Estimate yield based on a single minimum length limit</a></li>
    <li><a class="dropdown-item" href="../articles/YPR_VarMLL.html">Estimate yield based on multiple minimum length limit</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-explanations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Explanations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-explanations">
<li><a class="dropdown-item" href="../articles/YPR_FAMSvRICKER.html">Comparing FAMS and Ricker YPR Equations</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../news/index.html" aria-label="See package news"><span class="fa fa-newspaper"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Goto rFAMS home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fishR-Core-Team/rFAMS" aria-label="Goto rFAMS github page"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimate yield based on multiple minimum length limits</h1>

      <p class="author">Jason Doll</p>
      <p class="date">2026-01-27</p>

      <small class="dont-index">Source: <a href="https://github.com/fishR-Core-Team/rFAMS/blob/HEAD/vignettes/articles/YPR_VarMLL.qmd" class="external-link"><code>vignettes/articles/YPR_VarMLL.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fishR-Core-Team/rFAMS/" class="external-link">rFAMS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>  <span class="co">## to make figures</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>    <span class="co">## for pivot_longer</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>    <span class="co">## for filter</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://eliocamp.github.io/metR/" class="external-link">metR</a></span><span class="op">)</span>     <span class="co">## geom_text_contour</span></span></code></pre></div>
</div>
<p>The objective of this article is to demonstrate how to use rFAMS to calculate yield based on multiple minimum length limit with multiple values of conditional fishing and conditional natural mortality.</p>
<section class="section level2"><h2 id="build-a-life-history-parameter-list">Build a life history parameter list<a class="anchor" aria-label="anchor" href="#build-a-life-history-parameter-list"></a>
</h2>
<p>The first step for using any of the rFAMS simulation models is to create an object with life history parameters using the <code><a href="../reference/makeLH.html">makeLH()</a></code> function. THe <code><a href="../reference/makeLH.html">makeLH()</a></code> function creates a list of the life history parameters needed. Including, the initial number of recruits, maximum age of fish in your population, von Bertalanffy growth model parameters (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>L</mi><mi>∞</mi></msub><annotation encoding="application/x-tex">L_\infty</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math>, and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mn>0</mn></msub><annotation encoding="application/x-tex">t_0</annotation></semantics></math>), and parameters from the log10-transformed weight length model (alpha and beta). By default, the <code><a href="../reference/makeLH.html">makeLH()</a></code> returns a list. These values can be generated from functions in the <a href="https://fishr-core-team.github.io/FSA/index.html" class="external-link">FSA package</a>. The example below uses the following life history parameters: - NO is the initial number of recruits, set to 100. - tmax is the maximum age in the population in years, set to 15. - Linf is the point estimate of asymptotic mean length from the von Bertalanffy growth model, set to 592mm. - K (upper case) is the point estimate of the Brody growth coefficient from the von Bertalanffy growth model, set to 0.20. - t0 is the point estimate of the x-intercept (i.e., theoretical age at a mean length of 0) from the von Bertalanffy growth model, set to -0.3. - LWalpha is the point estimate of alpha from the length-weight regression on the log10 scale, set to -5.528. - LWbeta is the point estimate of beta from the length-weight regression on the log10 scale, set to 3.273.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create life history parameter object</span></span>
<span><span class="va">LH</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/makeLH.html">makeLH</a></span><span class="op">(</span>N0<span class="op">=</span><span class="fl">100</span>,tmax<span class="op">=</span><span class="fl">15</span>,Linf<span class="op">=</span><span class="fl">592</span>,K<span class="op">=</span><span class="fl">0.20</span>,t0<span class="op">=</span><span class="op">-</span><span class="fl">0.3</span>,LWalpha<span class="op">=</span><span class="op">-</span><span class="fl">5.528</span>,LWbeta<span class="op">=</span><span class="fl">3.273</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="estimate-yield-for-multiple-minimum-length-limit-and-multiple-conditional-fishing-and-conditional-natural-mortality-">Estimate yield for multiple minimum length limit and multiple conditional fishing and conditional natural mortality.<a class="anchor" aria-label="anchor" href="#estimate-yield-for-multiple-minimum-length-limit-and-multiple-conditional-fishing-and-conditional-natural-mortality-"></a>
</h2>
<p>The function <code><a href="../reference/yprBH_minLL_var.html">yprBH_minLL_var()</a></code> function is used when yield is estimated with a single fixed minimum length limit. This function requires the minimum length <code>minLL</code>; specified range of conditional fishing mortality by setting the minimum <code>cfmin</code>, maximum <code>cfmax</code>, and increment <code>cfinc</code>; specified range of conditional natural mortality by setting the minimum <code>cmmin</code>, maximum <code>cmmax</code>, and increment <code>cminc</code>; set any length of interest to monitor <code>loi</code>; and the life history parameters <code>lhparams</code>.</p>
<p>rFAMS includes a function <code><a href="../reference/est_natmort.html">est_natmort()</a></code> to estimate instantaneous natural mortality (M) and conditional natural mortality (cm) using parameters specified in the life history parameter object. See the <a href="https://fishr-core-team.github.io/FSA/index.html" class="external-link">FSA package</a> for other methods of calculating M and cm. To generate the range and average M and cm using rFAMS:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/est_natmort.html">est_natmort</a></span><span class="op">(</span><span class="va">LH</span>, incl.avg <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;            method         M         cm                  givens</span></span>
<span><span class="co">#&gt; 1       HoenigNLS 0.4100226 0.33636478                 tmax=15</span></span>
<span><span class="co">#&gt; 2         HoenigO 0.2954353 0.25579246                 tmax=15</span></span>
<span><span class="co">#&gt; 3        HoenigOF 0.2793944 0.24375845                 tmax=15</span></span>
<span><span class="co">#&gt; 4        HoenigOM 0.3594796 0.30196053                 tmax=15</span></span>
<span><span class="co">#&gt; 5        HoenigOC 0.2409592 0.21412628                 tmax=15</span></span>
<span><span class="co">#&gt; 6        HoenigO2 0.2963197 0.25645032                 tmax=15</span></span>
<span><span class="co">#&gt; 7       HoenigO2F 0.2568301 0.22650034                 tmax=15</span></span>
<span><span class="co">#&gt; 8       HoenigO2M 0.3521442 0.29682129                 tmax=15</span></span>
<span><span class="co">#&gt; 9       HoenigO2C 0.3110774 0.26734282                 tmax=15</span></span>
<span><span class="co">#&gt; 10       HoenigLM 0.3612696 0.30320890                 tmax=15</span></span>
<span><span class="co">#&gt; 11   HewittHoenig 0.2813333 0.24522330                 tmax=15</span></span>
<span><span class="co">#&gt; 12          tmax1 0.3406000 0.28865661                 tmax=15</span></span>
<span><span class="co">#&gt; 13      PaulyLNoT 0.3308050 0.28165477        K=0.2, Linf=59.2</span></span>
<span><span class="co">#&gt; 14             K1 0.3384000 0.28708993                   K=0.2</span></span>
<span><span class="co">#&gt; 15             K2 0.4080000 0.33502112                   K=0.2</span></span>
<span><span class="co">#&gt; 16       JensenK1 0.3000000 0.25918178                   K=0.2</span></span>
<span><span class="co">#&gt; 17       JensenK2 0.5040000 0.39589062                   K=0.2</span></span>
<span><span class="co">#&gt; 18 AlversonCarney 0.2821182 0.24581544          tmax=15, K=0.2</span></span>
<span><span class="co">#&gt; 19   ChenWatanabe 0.1018740 0.09685666 tmax=15, K=0.2, t0=-0.3</span></span>
<span><span class="co">#&gt; 20        AVERAGE 0.3184244 0.27040613</span></span></code></pre></div>
</div>
<p>Once you have decided the range of cf and cm and decided what minimum length limit to consider, you can now proceed to estimating yield. The following example uses the life history object created above with a minimum length limit of 200mm, cf from 0.1 to 0.9 with increments of 0.1, cm from 0.1 to 0.9 with increments of 0.1, monitors lengths of 200, 250, 300, and 350mm.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Res_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yprBH_minLL_var.html">yprBH_minLL_var</a></span><span class="op">(</span>lengthmin<span class="op">=</span><span class="fl">200</span>,lengthmax<span class="op">=</span><span class="fl">500</span>,lengthinc<span class="op">=</span><span class="fl">50</span>, <span class="co">#creates minimum length limits</span></span>
<span>                         cfmin<span class="op">=</span><span class="fl">0.1</span>,cfmax<span class="op">=</span><span class="fl">0.9</span>,cfinc<span class="op">=</span><span class="fl">0.1</span>, <span class="co">#creates vector of cf values</span></span>
<span>                         cmmin<span class="op">=</span><span class="fl">0.1</span>,cmmax<span class="op">=</span><span class="fl">0.9</span>,cminc<span class="op">=</span><span class="fl">0.1</span>, <span class="co">#creates vector of cm values</span></span>
<span>                         loi<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">450</span>, <span class="fl">500</span>, <span class="fl">550</span><span class="op">)</span>,     <span class="co">#sets lengths of interest to monitor</span></span>
<span>                         lhparms<span class="op">=</span><span class="va">LH</span><span class="op">)</span>                    <span class="co">#Specifies life history parameters</span></span></code></pre></div>
</div>
<p>The output object will be a data.frame with the following calculated values:</p>
<ul>
<li>yield is the estimated yield (in g).</li>
<li>exploitation is the exploitation rate.</li>
<li>Nharvest is the number of harvested fish.</li>
<li>Ndie is the number of fish that die of natural deaths.</li>
<li>Nt is the number of fish at time tr (time they become harvestable size).</li>
<li>avgwt is the average weight of fish harvested.</li>
<li>avglen is the average length of fish harvested.</li>
<li>tr is the time for a fish to recruit to a minimum length limit (i.e., time to enter fishery).</li>
<li>F is the instantaneous rate of fishing mortality.</li>
<li>M is the instantaneous rate of natural mortality.</li>
<li>Z is the instantaneous rate of total mortality.</li>
<li>S is the (total) annual rate of survival.</li>
<li>N at xxx mm is the number that reach the length of interest supplied. There will be one column for each length of interest.</li>
</ul>
<p>View the first few rows of the output</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Res_1</span><span class="op">)</span></span>
<span><span class="co">#&gt;      yield     u Nharvest     Ndie     avgwt   avglen       Nt       tr</span></span>
<span><span class="co">#&gt; 1 40818.31 0.095 41.53181 41.53181  982.8204 401.1080 83.06361 1.761224</span></span>
<span><span class="co">#&gt; 2 42961.98 0.095 38.65116 38.65116 1111.5316 416.4771 77.30232 2.443479</span></span>
<span><span class="co">#&gt; 3 44833.10 0.095 35.56322 35.56322 1260.6592 432.8090 71.12644 3.233764</span></span>
<span><span class="co">#&gt; 4 45992.30 0.095 32.21300 32.21300 1427.7562 449.5853 64.42599 4.172845</span></span>
<span><span class="co">#&gt; 5 45715.51 0.095 28.51544 28.51544 1603.1847 465.7891 57.03087 5.330056</span></span>
<span><span class="co">#&gt; 6 42738.81 0.095 24.32552 24.32552 1756.9537 479.0075 48.65103 6.838398</span></span>
<span><span class="co">#&gt;           F         M        Z    S  cf  cm minLL  N0 Linf   K   t0 LWalpha</span></span>
<span><span class="co">#&gt; 1 0.1053605 0.1053605 0.210721 0.81 0.1 0.1   200 100  592 0.2 -0.3  -5.528</span></span>
<span><span class="co">#&gt; 2 0.1053605 0.1053605 0.210721 0.81 0.1 0.1   250 100  592 0.2 -0.3  -5.528</span></span>
<span><span class="co">#&gt; 3 0.1053605 0.1053605 0.210721 0.81 0.1 0.1   300 100  592 0.2 -0.3  -5.528</span></span>
<span><span class="co">#&gt; 4 0.1053605 0.1053605 0.210721 0.81 0.1 0.1   350 100  592 0.2 -0.3  -5.528</span></span>
<span><span class="co">#&gt; 5 0.1053605 0.1053605 0.210721 0.81 0.1 0.1   400 100  592 0.2 -0.3  -5.528</span></span>
<span><span class="co">#&gt; 6 0.1053605 0.1053605 0.210721 0.81 0.1 0.1   450 100  592 0.2 -0.3  -5.528</span></span>
<span><span class="co">#&gt;   LWbeta tmax notes N at 400 mm N at 450 mm N at 500 mm N at 550 mm</span></span>
<span><span class="co">#&gt; 1  3.273   15          39.15698    28.49531    18.03716    7.895417</span></span>
<span><span class="co">#&gt; 2  3.273   15          42.07533    30.61904    19.38146    8.483857</span></span>
<span><span class="co">#&gt; 3  3.273   15          45.72871    33.27768    21.06435    9.220507</span></span>
<span><span class="co">#&gt; 4  3.273   15          50.48460    36.73864    23.25508   10.179461</span></span>
<span><span class="co">#&gt; 5  3.273   15          57.03087    41.50249    26.27054   11.499418</span></span>
<span><span class="co">#&gt; 6  3.273   15          57.03087    48.65103    30.79548   13.480121</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="plot-results">Plot results<a class="anchor" aria-label="anchor" href="#plot-results"></a>
</h2>
<p>We will now create a series of figures to aid in interpreting the output. First, a custom theme is created to use across all plots.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Custom theme for plots (to make look nice)</span></span>
<span><span class="va">theme_FAMS</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>   panel.grid.major<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,panel.grid.minor<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>   axis.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">14</span>,color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span>,</span>
<span>   axis.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">16</span>,color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span>,</span>
<span>   axis.title.y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle<span class="op">=</span><span class="fl">90</span><span class="op">)</span>,</span>
<span>   axis.line<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span>,</span>
<span>   panel.border<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span> <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<section class="level2"><h3 id="yield-as-a-function-of-exploitation">Yield as a function of exploitation<a class="anchor" aria-label="anchor" href="#yield-as-a-function-of-exploitation"></a>
</h3>
<p>The first graph will be a yield curve that displays the relationship between yield as a function of exploitation for a specified conditional natural morality <code>cm</code>. The example below uses <code>cm</code> = 0.30, which is close to the estimated mean <code>cm</code> above of 0.27</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Round cm to account for "floating point arithmetic inaccuracies"</span></span>
<span><span class="co"># will be fixed in next version of rFAMS so this isn't needed</span></span>
<span><span class="va">Res_1</span><span class="op">$</span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">Res_1</span><span class="op">$</span><span class="va">cm</span>,<span class="fl">8</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract results for cm=0.40 and minimum length limit=400</span></span>
<span><span class="va">plot_dat</span> <span class="op">&lt;-</span> <span class="va">Res_1</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cm</span><span class="op">==</span><span class="fl">0.30</span>,<span class="va">minLL</span><span class="op">==</span><span class="fl">400</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plot_dat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">u</span>,y<span class="op">=</span><span class="va">yield</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Total yield (g)"</span>,x<span class="op">=</span><span class="st">"Exploitation (u)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="YPR_VarMLL_files/figure-html/generate%20yield%20plot-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
<p>This next graph plots yield curves as a function of exploitation with multiple minimum lengths for a specified conditional natural morality <code>cm</code>. The example below uses <code>cm</code> = 0.30, as above.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Round cm to account for "floating point arithmetic inaccuracies"</span></span>
<span><span class="co"># will be fixed in next version of rFAMS so this isn't needed</span></span>
<span><span class="va">Res_1</span><span class="op">$</span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">Res_1</span><span class="op">$</span><span class="va">cm</span>,<span class="fl">8</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract results for cm=0.40 and minimum length limit=400</span></span>
<span><span class="va">plot_dat</span> <span class="op">&lt;-</span> <span class="va">Res_1</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cm</span><span class="op">==</span><span class="fl">0.30</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plot_dat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">yield</span>,x<span class="op">=</span><span class="va">u</span>,group<span class="op">=</span><span class="va">minLL</span>,color<span class="op">=</span><span class="va">minLL</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradient2</a></span><span class="op">(</span>high<span class="op">=</span><span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Total yield (g)"</span>,x<span class="op">=</span><span class="st">"Exploitation (u)"</span>,color<span class="op">=</span><span class="st">"Min Length Limit"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="YPR_VarMLL_files/figure-html/generate%20yield%20plot%20multiple%20MLL-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
</section><section class="level2"><h3 id="number-of-fish-that-reach-a-specified-size-as-a-function-of-exploitation">Number of fish that reach a specified size as a function of exploitation<a class="anchor" aria-label="anchor" href="#number-of-fish-that-reach-a-specified-size-as-a-function-of-exploitation"></a>
</h3>
<p>The next graph demonstrates how to explore the number of fish reaching a specified length. This figure creates a plot showing the number of fish reaching 450mm as a function of exploitation. Note this is based on a conditional natural mortality <code>cm</code> of 0.30 which was filtered out in the code block above.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract results for cm=0.40 and minimum length limit=400</span></span>
<span><span class="va">plot_dat</span> <span class="op">&lt;-</span> <span class="va">Res_1</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cm</span><span class="op">==</span><span class="fl">0.30</span>,<span class="va">minLL</span><span class="op">==</span><span class="fl">400</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plot_dat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">u</span>,y<span class="op">=</span><span class="va">`N at 450 mm`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Number of fish at 300 mm"</span>,x<span class="op">=</span><span class="st">"Exploitation (u)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="YPR_VarMLL_files/figure-html/Plot%20of%20fish%20reaching%20450mm-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
<p>The next example graph plots the number of fish reaching all the lengths of interests we monitored as a function of exploitation with conditional natural mortality <code>cm</code> of 0.30 which was filtered out above.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select columns for plotting and convert to long</span></span>
<span><span class="va">plot_data_long</span> <span class="op">&lt;-</span> <span class="va">plot_dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">u</span>,<span class="va">`N at 400 mm`</span>, <span class="va">`N at 450 mm`</span>, <span class="va">`N at 500 mm`</span>, <span class="va">`N at 550 mm`</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">!</span><span class="va">u</span>, names_to<span class="op">=</span><span class="st">"loi"</span>,values_to<span class="op">=</span><span class="st">"number"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plot_data_long</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">u</span>,y<span class="op">=</span><span class="va">number</span>,group<span class="op">=</span><span class="va">loi</span>,color<span class="op">=</span><span class="va">loi</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Yield"</span>,labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N at 400 mm"</span>, <span class="st">"N at 450 mm"</span>, <span class="st">"N at 500 mm"</span>, <span class="st">"N at 550 mm"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Number of fish"</span>,x<span class="op">=</span><span class="st">"Exploitation (u)"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span><span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>color<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Length of interest"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="YPR_VarMLL_files/figure-html/Plot%20of%20fish%20reaching%20all%20sizes-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
</section><section class="level2"><h3 id="isopleths-of-yield-and-number-harvested">Isopleths of yield and number harvested<a class="anchor" aria-label="anchor" href="#isopleths-of-yield-and-number-harvested"></a>
</h3>
<p>The final two graphs demonstrate how to construct isopleths using the <code>ggplot2</code> and <code>metR</code> packages. We will use the same data from above that is filtered for a conditional natural mortality <code>cm</code> of 0.30.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract results for cm=0.40 and minimum length limit=400</span></span>
<span><span class="va">plot_dat</span> <span class="op">&lt;-</span> <span class="va">Res_1</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cm</span><span class="op">==</span><span class="fl">0.30</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Yield isopleths for varying minLL and exploitation with cm=0.40</span></span>
<span><span class="co"># Using same data as previous example</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plot_dat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">u</span>,y<span class="op">=</span><span class="va">minLL</span>,z<span class="op">=</span><span class="va">yield</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://eliocamp.github.io/metR/reference/geom_contour2.html" class="external-link">geom_contour2</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">level</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Exploitation (u)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Minimum length limit (mm)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="YPR_VarMLL_files/figure-html/Isoploths-1.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Same isopleth as previous but using number harvested instead of yield</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">plot_dat</span>,mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">u</span>,y<span class="op">=</span><span class="va">minLL</span>,z<span class="op">=</span><span class="va">Nharvest</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://eliocamp.github.io/metR/reference/geom_contour2.html" class="external-link">geom_contour2</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">level</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Exploitation (u)"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Minimum length limit (mm)"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_FAMS</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="YPR_VarMLL_files/figure-html/Isoploths-2.png" class="quarto-figure quarto-figure-center" width="720"></p>
</figure>
</div>
</div>
</div>
</section></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason C. Doll, Derek H. Ogle.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
